<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="/TestPage.css" />
    <title>Layout</title>

    <script src="/Script/Package.js"></script>
    <script src="/Script/Test.js"></script>
    <script src="/Script/Html/Events.js"></script>
    <script src="/Script/Html/ResizeEvent.js"></script>
    <script src="/Script/GacUI/Layout.js"></script>
    <script src="/Script/GacUI/Elements.js"></script>
    <script src="/Script/GacUI/Types.js"></script>
    <script src="/Script/Class.js"></script>
</head>
<body>
    <script src="/TestPage.js"></script>

    <div class="TabPageContainer" id="tabControl">
        <div class="TabButtonContainer">
            <div class="TabButton">Elements</div>
            <div class="TabButton">Bounds</div>
            <div class="TabButton">Table</div>
            <div class="TabButton">Stack</div>
            <div class="TabButton">SideAligned</div>
            <div class="TabButton">PartialView</div>
        </div>

        <div class="TabPage">
            <table>
                <tr>
                    <th>Description</th>
                    <th>Result</th>
                    <th>Description</th>
                    <th>Result</th>
                    <th>Description</th>
                    <th>Result</th>
                </tr>
                <tr>
                    <th>SolidBorder (Rectangle)</th>
                    <td id="cell_Elements_SolidBorder_Rectangle"></td>
                    <th>SolidBackground (Rectangle)</th>
                    <td id="cell_Elements_SolidBackground_Rectangle"></td>
                    <th>SolidLabel</th>
                    <td id="cell_Elements_SolidLabel">
                        <div id="cell_Elements_SolidLabel_Alignments" style="display:-ms-grid;-ms-grid-columns:1fr 1fr 1fr;-ms-grid-rows:1fr 1fr 1fr; position:absolute;">
                            <div id="cell_elements_SolidLabel_LT" style="-ms-grid-row: 1; -ms-grid-column: 1;"></div>
                            <div id="cell_elements_SolidLabel_CT" style="-ms-grid-row: 1; -ms-grid-column: 2;"></div>
                            <div id="cell_elements_SolidLabel_RT" style="-ms-grid-row: 1; -ms-grid-column: 3;"></div>
                            <div id="cell_elements_SolidLabel_LC" style="-ms-grid-row: 2; -ms-grid-column: 1;"></div>
                            <div id="cell_elements_SolidLabel_CC" style="-ms-grid-row: 2; -ms-grid-column: 2;"></div>
                            <div id="cell_elements_SolidLabel_RC" style="-ms-grid-row: 2; -ms-grid-column: 3;"></div>
                            <div id="cell_elements_SolidLabel_LB" style="-ms-grid-row: 3; -ms-grid-column: 1;"></div>
                            <div id="cell_elements_SolidLabel_CB" style="-ms-grid-row: 3; -ms-grid-column: 2;"></div>
                            <div id="cell_elements_SolidLabel_RB" style="-ms-grid-row: 3; -ms-grid-column: 3;"></div>
                        </div>
                    </td>
                </tr>
                <tr>
                    <th>SolidBorder (Ellipse)</th>
                    <td id="cell_Elements_SolidBorder_Ellipse"></td>
                    <th>SolidBackground (Ellipse)</th>
                    <td id="cell_Elements_SolidBackground_Ellipse"></td>
                    <th>ImageFrame</th>
                    <td id="cell_Elements_ImageFrame"></td>
                </tr>
                <tr>
                    <th>3DBorder</th>
                    <td id="cell_Elements_3DBorder"></td>
                    <th>GradientBackground (Horizontal)</th>
                    <td id="cell_Elements_GradientBackground_Horizontal"></td>
                    <th>Polygon</th>
                    <td id="cell_Elements_Polygon"></td>
                </tr>
                <tr>
                    <th>3DSplitter (Horizontal)</th>
                    <td id="cell_Elements_3DSplitter_Horizontal"></td>
                    <th>GradientBackground (Vertical)</th>
                    <td id="cell_Elements_GradientBackground_Vertical"></td>
                    <th>ColorizedText</th>
                    <td id="cell_Elements_ColorizedText"></td>
                </tr>
                <tr>
                    <th>3DSplitter (Vertical)</th>
                    <td id="cell_Elements_3DSplitter_Vertical"></td>
                    <th>GradientBackground (Slash)</th>
                    <td id="cell_Elements_GradientBackground_Slash"></td>
                    <th>Document</th>
                    <td id="cell_Elements_Document"></td>
                </tr>
                <tr>
                    <th>RoundBorder</th>
                    <td id="cell_Elements_RoundBorder"></td>
                    <th>GradientBackground (Backslash)</th>
                    <td id="cell_Elements_GradientBackground_Backslash"></td>
                    <th>Experiment</th>
                    <td>
                        <div id="box_Experiment" style="display: block; position: relative; left: 0px; top: 0px; width: 100px; height: 100px; min-width: 50px; min-height: 50px;">
                            <div style="display: block; position: absolute; left: 0px; top: 0px; width: calc(100% - 2px); height: calc(100% - 2px); border: 1px solid blue; "></div>
                            <div style="display: block; position: relative; width: calc(100% - 20px); height: calc(100% - 20px); padding-left: 10px; padding-top: 10px; padding-right: 10px; padding-bottom: 10px;">
                                <div style="display: block; position: relative; overflow: hidden; width: calc(100% - 2px); height: calc(100% - 2px); border: 1px solid green; ">
                                    GacUI: GPU Accelerated C++ User Interface, with WYSIWYG developing tools, XML supports, built-in data binding and MVVM features.
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>
            </table>
        </div>
        <script>
            function create_Elements_SolidBorder(shape) {
                var element = new SolidBorder();
                element.Color = new Color(0, 128, 0, 255);
                element.Shape = shape;

                var layout = new Layout();
                layout.OwnedElement = element;
                return layout;
            }
            cell_Elements_SolidBorder_Rectangle.appendChild(CreateLayoutEmbedder(create_Elements_SolidBorder(ElementShape.Description.Rectangle)));
            cell_Elements_SolidBorder_Ellipse.appendChild(CreateLayoutEmbedder(create_Elements_SolidBorder(ElementShape.Description.Ellipse)));

            function create_Elements_SolidBackground(shape) {
                var element = new SolidBackground();
                element.Color = new Color(0, 128, 0, 255);
                element.Shape = shape;

                var layout = new Layout();
                layout.OwnedElement = element;
                return layout;
            }
            cell_Elements_SolidBackground_Rectangle.appendChild(CreateLayoutEmbedder(create_Elements_SolidBackground(ElementShape.Description.Rectangle)));
            cell_Elements_SolidBackground_Ellipse.appendChild(CreateLayoutEmbedder(create_Elements_SolidBackground(ElementShape.Description.Ellipse)));

            ////////////////////////////////////////////////////////////////////////////////////////

            function create_Elements_RoundBorder() {
                var element = new RoundBorder();
                element.Color = new Color(0, 128, 0, 255);
                element.Radius = 10;

                var layout = new Layout();
                layout.OwnedElement = element;
                return layout;
            }
            cell_Elements_RoundBorder.appendChild(CreateLayoutEmbedder(create_Elements_RoundBorder()));

            ////////////////////////////////////////////////////////////////////////////////////////

            function create_Elements_3DBorder() {
                var element = new ThreeDBorder();
                element.SetColors(new Color(0, 255, 0, 255), new Color(0, 64, 0, 255));

                var layout = new Layout();
                layout.OwnedElement = element;
                return layout;
            }
            cell_Elements_3DBorder.appendChild(CreateLayoutEmbedder(create_Elements_3DBorder()));

            function create_Elements_3DSplitter(direction) {
                var element = new ThreeDSplitter();
                element.SetColors(new Color(0, 255, 0, 255), new Color(0, 64, 0, 255));
                element.Direction = direction;

                var layout = new Layout();
                layout.OwnedElement = element;
                return layout;
            }
            cell_Elements_3DSplitter_Horizontal.appendChild(CreateLayoutEmbedder(create_Elements_3DSplitter(ThreeDSplitterDirection.Description.Horizontal)));
            cell_Elements_3DSplitter_Vertical.appendChild(CreateLayoutEmbedder(create_Elements_3DSplitter(ThreeDSplitterDirection.Description.Vertical)));

            ////////////////////////////////////////////////////////////////////////////////////////

            function create_Elements_GradientBackground(direction, shape) {
                var element = new GradientBackground();
                element.SetColors(new Color(0, 128, 0, 255), new Color(0, 0, 128, 255));
                element.Direction = direction;
                element.Shape = shape;

                var layout = new Layout();
                layout.OwnedElement = element;
                return layout;
            }
            cell_Elements_GradientBackground_Horizontal.appendChild(CreateLayoutEmbedder(create_Elements_GradientBackground(GradientBackgroundrDirection.Description.Horizontal, ElementShape.Description.Rectangle)));
            cell_Elements_GradientBackground_Horizontal.appendChild(CreateLayoutEmbedder(create_Elements_GradientBackground(GradientBackgroundrDirection.Description.Horizontal, ElementShape.Description.Ellipse)));
            cell_Elements_GradientBackground_Vertical.appendChild(CreateLayoutEmbedder(create_Elements_GradientBackground(GradientBackgroundrDirection.Description.Vertical, ElementShape.Description.Rectangle)));
            cell_Elements_GradientBackground_Vertical.appendChild(CreateLayoutEmbedder(create_Elements_GradientBackground(GradientBackgroundrDirection.Description.Vertical, ElementShape.Description.Ellipse)));
            cell_Elements_GradientBackground_Slash.appendChild(CreateLayoutEmbedder(create_Elements_GradientBackground(GradientBackgroundrDirection.Description.Slash, ElementShape.Description.Rectangle)));
            cell_Elements_GradientBackground_Slash.appendChild(CreateLayoutEmbedder(create_Elements_GradientBackground(GradientBackgroundrDirection.Description.Slash, ElementShape.Description.Ellipse)));
            cell_Elements_GradientBackground_Backslash.appendChild(CreateLayoutEmbedder(create_Elements_GradientBackground(GradientBackgroundrDirection.Description.Backslash, ElementShape.Description.Rectangle)));
            cell_Elements_GradientBackground_Backslash.appendChild(CreateLayoutEmbedder(create_Elements_GradientBackground(GradientBackgroundrDirection.Description.Backslash, ElementShape.Description.Ellipse)));

            ////////////////////////////////////////////////////////////////////////////////////////

            function create_Elements_SolidLabelAlignment(text, horizontalAlignment, verticalAlignment) {
                var element = new SolidLabel();
                element.Color = new Color(0, 128, 0, 255);
                element.Font = new FontProperties("Segoe UI", 18, true, true, true, true, true, false);
                element.Text = text;
                element.HorizontalAlignment = horizontalAlignment;
                element.VerticalAlignment = verticalAlignment;

                var layout = new Layout();
                layout.OwnedElement = element;

                var div = layout.BoundsHtmlElement;
                div.style.position = "relative";
                div.style.width = "100%";
                div.style.height = "100%";
                return div;
            }
            cell_elements_SolidLabel_LT.appendChild(create_Elements_SolidLabelAlignment("LT", Alignment.Description.Left, Alignment.Description.Top));
            cell_elements_SolidLabel_CT.appendChild(create_Elements_SolidLabelAlignment("CT", Alignment.Description.Center, Alignment.Description.Top));
            cell_elements_SolidLabel_RT.appendChild(create_Elements_SolidLabelAlignment("RT", Alignment.Description.Right, Alignment.Description.Top));
            cell_elements_SolidLabel_LC.appendChild(create_Elements_SolidLabelAlignment("LC", Alignment.Description.Left, Alignment.Description.Center));
            cell_elements_SolidLabel_CC.appendChild(create_Elements_SolidLabelAlignment("CC", Alignment.Description.Center, Alignment.Description.Center));
            cell_elements_SolidLabel_RC.appendChild(create_Elements_SolidLabelAlignment("RC", Alignment.Description.Right, Alignment.Description.Center));
            cell_elements_SolidLabel_LB.appendChild(create_Elements_SolidLabelAlignment("LB", Alignment.Description.Left, Alignment.Description.Bottom));
            cell_elements_SolidLabel_CB.appendChild(create_Elements_SolidLabelAlignment("CB", Alignment.Description.Center, Alignment.Description.Bottom));
            cell_elements_SolidLabel_RB.appendChild(create_Elements_SolidLabelAlignment("RB", Alignment.Description.Right, Alignment.Description.Bottom));
            cell_Elements_SolidLabel.appendChild(CreateLayoutEmbedder(cell_Elements_SolidLabel_Alignments, 3, 3));
        </script>

        <div class="TabPage">
            Bounds
        </div>
        <script>
        </script>

        <div class="TabPage">
            Table
        </div>
        <script>
        </script>

        <div class="TabPage">
            Stack
        </div>
        <script>
        </script>

        <div class="TabPage">
            SideAligned
        </div>
        <script>
        </script>

        <div class="TabPage">
            PartialView
        </div>
        <script>
        </script>

    </div>

    <script>
        SetupTabControl(tabControl);
        InstallDraggableHandlers(box_Experiment);
    </script>

    <script>
        TestCase("print and parse colors should success", function () {
            var c1 = Color.Parse("#000000");
            Assert(c1.r === 0);
            Assert(c1.g === 0);
            Assert(c1.b === 0);
            Assert(c1.a === 255);
            Assert(c1.__ToString() === "#000000");

            var c2 = Color.Parse("#FFFFFF");
            Assert(c2.r === 255);
            Assert(c2.g === 255);
            Assert(c2.b === 255);
            Assert(c2.a === 255);
            Assert(c2.__ToString() === "#FFFFFF");

            var c3 = Color.Parse("#01020304");
            Assert(c3.r === 1);
            Assert(c3.g === 2);
            Assert(c3.b === 3);
            Assert(c3.a === 4);
            Assert(c3.__ToString() === "#01020304");
        });
    </script>

    <script>
        TestCase("layout should maintain the children relationship correctly", function () {
            var a = new Layout();
            var b = new Layout();
            var c = new Layout();
            var d = new Layout();

            Assert(a.Parent === null);
            Assert(b.Parent === null);
            Assert(c.Parent === null);
            Assert(d.Parent === null);
            Assert(a.Children.length === 0);

            a.AddChild(b);
            a.AddChild(c);
            a.AddChild(d);

            Assert(a.Parent === null);
            Assert(b.Parent === a);
            Assert(c.Parent === a);
            Assert(d.Parent === a);
            Assert(a.Children.length === 3);
            Assert(a.Children[0] === b);
            Assert(a.Children[1] === c);
            Assert(a.Children[2] === d);

            a.RemoveChild(b);
            a.RemoveChild(c);

            Assert(a.Parent === null);
            Assert(b.Parent === null);
            Assert(c.Parent === null);
            Assert(d.Parent === a);
            Assert(a.Children.length === 1);
            Assert(a.Children[0] === d);

            a.InsertChild(1, b);
            a.InsertChild(1, c);

            Assert(a.Parent === null);
            Assert(b.Parent === a);
            Assert(c.Parent === a);
            Assert(d.Parent === a);
            Assert(a.Children.length === 3);
            Assert(a.Children[0] === d);
            Assert(a.Children[1] === c);
            Assert(a.Children[2] === b);

            a.MoveChild(b, 0);
            a.MoveChild(c, 1);

            Assert(a.Parent === null);
            Assert(b.Parent === a);
            Assert(c.Parent === a);
            Assert(d.Parent === a);
            Assert(a.Children.length === 3);
            Assert(a.Children[0] === b);
            Assert(a.Children[1] === c);
            Assert(a.Children[2] === d);
        });
    </script>

    <script>
        SummaryTest();
    </script>
</body>
</html>
